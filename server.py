"""
Youtube138 MCP Server

‰ΩøÁî® FastMCP ÁöÑ from_openapi ÊñπÊ≥ïËá™Âä®ÁîüÊàê

Version: 1.6.0
Transport: stdio
"""
import os
import json
import httpx
from fastmcp import FastMCP

# ÊúçÂä°Âô®ÁâàÊú¨ÂíåÈÖçÁΩÆ
__version__ = "1.6.0"
__tag__ = "youtube138/1.6.0"

# API ÈÖçÁΩÆ
API_KEY = os.getenv("API_KEY", "")

# ‰º†ËæìÂçèËÆÆÈÖçÁΩÆ
TRANSPORT = "stdio"


# OpenAPI ËßÑËåÉ
OPENAPI_SPEC = """{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"Youtube138\",\n    \"version\": \"1.6.0\",\n    \"description\": \"RapidAPI: Glavier/youtube138\"\n  },\n  \"servers\": [\n    {\n      \"url\": \"https://youtube138.p.rapidapi.com\"\n    }\n  ],\n  \"paths\": {\n    \"/auto-complete/\": {\n      \"get\": {\n        \"summary\": \"Auto Complete\",\n        \"description\": \"Auto Complete\",\n        \"operationId\": \"auto_complete\",\n        \"parameters\": [\n          {\n            \"name\": \"q\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Query for suggestions\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/v2/trending\": {\n      \"get\": {\n        \"summary\": \"Trending\",\n        \"description\": \"Trending\",\n        \"operationId\": \"trending\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/home/\": {\n      \"get\": {\n        \"summary\": \"Home\",\n        \"description\": \"Home\",\n        \"operationId\": \"home\",\n        \"parameters\": [\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/search/\": {\n      \"get\": {\n        \"summary\": \"Search\",\n        \"description\": \"Search\",\n        \"operationId\": \"search\",\n        \"parameters\": [\n          {\n            \"name\": \"q\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Search query\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/channels/\": {\n      \"get\": {\n        \"summary\": \"Channel Channels\",\n        \"description\": \"Channel Channels\",\n        \"operationId\": \"channel_channels\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Channel ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"filter\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Filter key or token, default: all_collections Keys you can enter: all_collections: Returns channel collections subscriptions: Returns subscribed channels or custom collection token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: \",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/search/\": {\n      \"get\": {\n        \"summary\": \"Channel Search\",\n        \"description\": \"Channel Search\",\n        \"operationId\": \"channel_search\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Channel ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"q\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Search query\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/playlists/\": {\n      \"get\": {\n        \"summary\": \"Channel Playlists\",\n        \"description\": \"Channel Playlists\",\n        \"operationId\": \"channel_playlists\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Channel ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"filter\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Filter key or token, default: all_collections Keys you can enter: all_collections: Returns playlist collections created_playlists_newest: Returns created playlists (by newest) created_playlists_last_video_added: Returns created playlists (by last video added) saved_playlists: Returns saved playlists or custom collection token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/details/\": {\n      \"get\": {\n        \"summary\": \"Channel Details\",\n        \"description\": \"Channel Details\",\n        \"operationId\": \"channel_details\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Channel ID or URL e.g. UCJ5v_MCY6GNUBTO8-D3XoAg e.g. https://www.youtube.com/@WWE\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/community/\": {\n      \"get\": {\n        \"summary\": \"Channel Community\",\n        \"description\": \"Channel Community\",\n        \"operationId\": \"channel_community\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Channel ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/channel/videos/\": {\n      \"get\": {\n        \"summary\": \"Channel Videos\",\n        \"description\": \"Channel Videos\",\n        \"operationId\": \"channel_videos\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Channel ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"filter\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Filter key, default: videos_latest Keys you can enter: videos_latest: Returns videos (by latest) streams_latest: Returns live streams (by latest) shorts_latest: Returns short videos (by latest) live_now: Returns current live streams\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/v2/channel-details\": {\n      \"get\": {\n        \"summary\": \"Channel Details (v2)\",\n        \"description\": \"Channel Details (v2)\",\n        \"operationId\": \"channel_details_(v2)\",\n        \"parameters\": [\n          {\n            \"name\": \"channel_id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Channel ID or URL e.g. UCJ5v_MCY6GNUBTO8-D3XoAg e.g. https://www.youtube.com/@WWE\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/video/comments/\": {\n      \"get\": {\n        \"summary\": \"Video Comments\",\n        \"description\": \"Video Comments\",\n        \"operationId\": \"video_comments\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Video ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/video/related-contents/\": {\n      \"get\": {\n        \"summary\": \"Video Related Contents\",\n        \"description\": \"Video Related Contents\",\n        \"operationId\": \"video_related_contents\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Video ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/video/streaming-data/\": {\n      \"get\": {\n        \"summary\": \"Video Streaming Data\",\n        \"description\": \"Video Streaming Data\",\n        \"operationId\": \"video_streaming_data\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Video ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/video/details/\": {\n      \"get\": {\n        \"summary\": \"Video Details\",\n        \"description\": \"Video Details\",\n        \"operationId\": \"video_details\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Video ID or URL e.g. kJQP7kiw5Fk e.g. https://youtu.be/kJQP7kiw5Fk e.g. https://www.youtube.com/watch?v=kJQP7kiw5Fk\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/v2/video-details\": {\n      \"get\": {\n        \"summary\": \"Video Details (v2)\",\n        \"description\": \"Video Details (v2)\",\n        \"operationId\": \"video_details_(v2)\",\n        \"parameters\": [\n          {\n            \"name\": \"video_id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Video ID or URL e.g. kJQP7kiw5Fk e.g. https://youtu.be/kJQP7kiw5Fk e.g. https://www.youtube.com/watch?v=kJQP7kiw5Fk\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/community-post/comments/\": {\n      \"get\": {\n        \"summary\": \"Community Post Comments\",\n        \"description\": \"Community Post Comments\",\n        \"operationId\": \"community_post_comments\",\n        \"parameters\": [\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Cursor token You can get it from the Community Post Details endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/community-post/details/\": {\n      \"get\": {\n        \"summary\": \"Community Post Details\",\n        \"description\": \"Community Post Details\",\n        \"operationId\": \"community_post_details\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Community post ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/playlist/videos/\": {\n      \"get\": {\n        \"summary\": \"Playlist Videos\",\n        \"description\": \"Playlist Videos\",\n        \"operationId\": \"playlist_videos\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Playlist ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"cursor\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Cursor token\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/playlist/details/\": {\n      \"get\": {\n        \"summary\": \"Playlist Details\",\n        \"description\": \"Playlist Details\",\n        \"operationId\": \"playlist_details\",\n        \"parameters\": [\n          {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Playlist ID\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"hl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: en\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"gl\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: US\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"components\": {\n    \"securitySchemes\": {\n      \"ApiAuth\": {\n        \"type\": \"apiKey\",\n        \"in\": \"header\",\n        \"name\": \"X-RapidAPI-Key\"\n      }\n    }\n  },\n  \"security\": [\n    {\n      \"ApiAuth\": []\n    }\n  ]\n}"""

# ÂàõÂª∫ HTTP ÂÆ¢Êà∑Á´Ø
# ËÆæÁΩÆÈªòËÆ§ headers
default_headers = {}


# RapidAPI ÂøÖÈúÄÁöÑ headers
if API_KEY:
    default_headers["X-RapidAPI-Key"] = API_KEY
    default_headers["X-RapidAPI-Host"] = "youtube138.p.rapidapi.com"
else:
    print("‚ö†Ô∏è  Ë≠¶Âëä: Êú™ËÆæÁΩÆ API_KEY ÁéØÂ¢ÉÂèòÈáè")
    print("   RapidAPI ÈúÄË¶Å API Key ÊâçËÉΩÊ≠£Â∏∏Â∑•‰Ωú")
    print("   ËØ∑ËÆæÁΩÆ: export API_KEY=‰Ω†ÁöÑRapidAPI-Key")

# ÂØπ‰∫é POST/PUT/PATCH ËØ∑Ê±ÇÔºåËá™Âä®Ê∑ªÂä† Content-Type
default_headers["Content-Type"] = "application/json"




client = httpx.AsyncClient(
    base_url="https://youtube138.p.rapidapi.com", 
    timeout=30.0
)


# ‰ªé OpenAPI ËßÑËåÉÂàõÂª∫ FastMCP ÊúçÂä°Âô®
openapi_dict = json.loads(OPENAPI_SPEC)
mcp = FastMCP.from_openapi(
    openapi_spec=openapi_dict,
    client=client,
    name="youtube138",
    version=__version__
)


# Ê≥®ÂÜåËØ∑Ê±ÇÊã¶Êà™Âô®Ôºå‰∏∫ÊâÄÊúâËØ∑Ê±ÇÊ∑ªÂä† RapidAPI headers
_original_request = client.request

async def _add_rapidapi_headers(method, url, **kwargs):
    """Êã¶Êà™ÊâÄÊúâËØ∑Ê±ÇÔºåÊ∑ªÂä†ÂøÖÈúÄÁöÑ RapidAPI headers"""
    # Á°Æ‰øù headers Â≠òÂú®
    if 'headers' not in kwargs:
        kwargs['headers'] = {}
    
    # Ê∑ªÂä† RapidAPI ÂøÖÈúÄÁöÑ headers
    if API_KEY:
        kwargs['headers']['X-RapidAPI-Key'] = API_KEY
        kwargs['headers']['X-RapidAPI-Host'] = "youtube138.p.rapidapi.com"
    else:
        print("‚ö†Ô∏è  Ë≠¶Âëä: API_KEY Êú™ËÆæÁΩÆÔºåËØ∑Ê±ÇÂèØËÉΩÂ§±Ë¥•")
    
    # ÂØπ‰∫é POST/PUT/PATCHÔºåÊ∑ªÂä† Content-Type
    if method.upper() in ['POST', 'PUT', 'PATCH']:
        if 'Content-Type' not in kwargs['headers']:
            kwargs['headers']['Content-Type'] = 'application/json'
    
    return await _original_request(method, url, **kwargs)

# ÊõøÊç¢ request ÊñπÊ≥ï
client.request = _add_rapidapi_headers


def main():
    """‰∏ªÂÖ•Âè£ÁÇπ"""
    print(f"üöÄ ÂêØÂä® Youtube138 MCP ÊúçÂä°Âô®")
    print(f"üì¶ ÁâàÊú¨: {__tag__}")
    print(f"üîß ‰º†ËæìÂçèËÆÆ: {TRANSPORT}")
    
    print()
    
    # ËøêË°åÊúçÂä°Âô®
    
    mcp.run(transport="stdio")
    


if __name__ == "__main__":
    main()